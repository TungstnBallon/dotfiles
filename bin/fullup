#!/usr/bin/env sh

first=true

section() {
	if [ $first = true ]; then
		first=false
		printf "\e[2m---* %s *---\e[0m\n" "$1"
	else
		printf "\n\e[2m---* %s *---\e[0m\n" "$1"
	fi
}

section "System packages"
sudo pacman -Syu --noconfirm

section "AUR packages"
rua upgrade

section Flatpak
flatpak update -y
flatpak remove --unused -y
flatpak remove --delete-data -y

section Rust
rustup update

section Dotfiles
git -C "$HOME/.dotfiles" pull

section Prompt
(
	cd "$HOME/.dotfiles/prompt" || return
	cargo install --path .
)
